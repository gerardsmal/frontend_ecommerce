<div class="container">
    <mat-card class="example-card" appearance="outlined">
        <mat-card-header class="header-row">
            <mat-card-title>Prodotti del carrello</mat-card-title>
             <span class="spacer"></span>
            
                    <span class="total-text">
                        Prezzo totale: {{ account()?.carello?.prezzoTotale | currency:'EUR' }}
                    </span>
                    <button mat-raised-button color="primary" class="order-btn" (click)="onOrdine()">Fai ordine</button>
            
        </mat-card-header>
        <mat-card-content>
            <mat-divider style="margin-top: 20px;"></mat-divider>
            <div>
                <div class="msg-error">
                    <span style="color:red">{{ msg() }}</span>
                </div>

                <table class="table table-stripped ">
                    <thead>
                        <tr>
                            <th></th>
                            <th>Nome</th>
                            <th>Artisto</th>
                            <th>Genere</th>
                            <th>Supporto</th>
                            <th>Prezzo</th>
                            <th>Quantita</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>


                        @for (riga of account()?.carello?.riga ?? []; track riga.id) {
                        <tr class="cart-row">

                            <td class="cart-cell image-cell" (click)="onSelectedProduct(riga)">
                                <img [src]="riga.image || 'no-image.png'" alt="" />
                            </td>

                            <td class="cart-cell">
                                <div class="cell-text">{{ riga.productName }}</div>
                            </td>

                            <td class="cart-cell">
                                <div class="cell-text">{{ riga.artist }}</div>
                            </td>

                            <td class="cart-cell">
                                <div class="cell-text">{{ riga.genere }}</div>
                            </td>

                            <td class="cart-cell">
                                <div class="cell-text">{{ riga.supporto }}</div>
                            </td>

                            <td class="cart-cell">
                                <div class="cell-text">{{ riga.prezzo | currency: 'EUR' }}</div>
                            </td>

                            <td class="cart-cell qty-cell">
                                <div class="qty-control">
                                    <button mat-icon-button class="qty-btn"
                                        (click)="onChangeQuantita(riga, riga.quantita - 1)">
                                        <mat-icon>remove</mat-icon>
                                    </button>

                                    <input type="number" min="1" [value]="riga.quantita"
                                        (change)="onChangeQuantita(riga, $event.target.value)" class="qty-input">

                                    <button mat-icon-button class="qty-btn"
                                        (click)="onChangeQuantita(riga, riga.quantita + 1)">
                                        <mat-icon>add</mat-icon>
                                    </button>
                                </div>
                            </td>


                            <td class="cart-cell delete-cell">
                                <button mat-icon-button color="warn" class="delete-btn" (click)="onDelete(riga.id)">
                                    <mat-icon>delete</mat-icon>
                                </button>
                            </td>

                        </tr>
                        }
                    </tbody>

                </table>


            </div>



        </mat-card-content>
    </mat-card>
</div>